Kafka реалецируется по схема мастер-слэйв. Все записи и чтения идут в мастер [[Partition]] .
Из этого следует что чем больше у нас нагрузка тем больше у нас должно быть [[Partition]]

Так как кафка по [[CAP-теорема]] не гарантируется консистентность, то некоторые сообщения могут теряться. Например когда произошла смена лидера. И на старом лидере остались сообщения которые не успели реплицироваться на новый.

- acks = all - продюсер не будет считать завершенной транзакцию пока сообщения не прольются на все реплики
- min.insync.replicas - минимальное количество реплик на которые сообщение прольтеся что бы завершить транзакцию

![[Pasted image 20230611163907.png]]
![[Pasted image 20230611164147.png]]


![[Pasted image 20230611161225.png]]
