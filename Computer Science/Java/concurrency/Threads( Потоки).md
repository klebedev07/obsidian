Потоки используют то же самое пространство стэка что и [[Процессы]], а множество потоков имеют общий доступ к данным в рамках одного процесса. 

Когда один поток изменяет ресурс процесса, это изменение сразу же становится видно другим потокам этого процесса.

Потоки позволяют добиться следующих преимуществ:
- Лучшая утилизация ЦПУ
- Лучшая отзывчивость программы
- Лучшая производительность, при правильном использовании

Главной проблемой многопоточного программирования является организация защиты от неконтролируемого конкурентного доступа к данным.


![[Pasted image 20230526154044.png]]
-XX:ThreadStackSize=1024k
-Xss1024k

Потоки могут быть:
- Обычные - бизнес логика и ифраструктура
- Фоновые - сбор статистики, мониторинг, отправка сигналов , что сервис работает, сброс кэша, [[GC]], [[JIT-компиляции]] и т.д
 
![[Pasted image 20230526154303.png]]

 Внутри jvmпотоки могут быть в нескольких состояниях:
 - New - создан, но еще не запущен
 - Runnable - когда он готов к работе, означает что планировщик может ему отдавать процессорное время
 - Blocked -  когда поток стоит в ожидании входа в критическую секцию
 - WAITING & TIMED_WAITING - когда потоки ждут чего то,например lock
  ![[Pasted image 20230526160051.png]]




![[Pasted image 20230526160453.png]]




[[Native Stack]]
[[Stack]]
[[Thread local allocation]] TLAB
